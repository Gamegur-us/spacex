webpackJsonp([1],[function(t,i,o){"use strict";var e=this&&this.__extends||function(t,i){function o(){this.constructor=t}for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)},s=o(8),a=function(t){function i(){t.call(this,{width:800,height:600,transparent:!1,enableDebug:!0}),this.state.add("boot",s.Boot),this.state.add("preload",s.Preload),this.state.add("main",s.Main),this.state.start("boot")}return e(i,t),i}(Phaser.Game);window.onload=function(){new a}},,,,,function(t,i){"use strict";var o=this&&this.__extends||function(t,i){function o(){this.constructor=t}for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)},e=function(t){function i(){t.apply(this,arguments)}return o(i,t),i.prototype.preload=function(){this.load.image("preload-bar","assets/loading.png")},i.prototype.create=function(){this.game.stage.backgroundColor=16777215,this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.game.state.start("preload")},i}(Phaser.State);i.Boot=e},function(t,i){"use strict";var o=this&&this.__extends||function(t,i){function o(){this.constructor=t}for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)},e=function(t){function i(){t.apply(this,arguments)}return o(i,t),i.prototype.preload=function(){this.load.spritesheet("player","assets/player.png",32,29,2),this.load.image("bg","assets/bg.png"),this.load.image("gun","assets/gun.png"),this.load.image("bullet","assets/bullet.png"),this.load.image("pixel","assets/pixel.png"),this.load.spritesheet("smoke","assets/humo1.png",52,52,10)},i.prototype.create=function(){this.game.input.activePointer.x=this.game.width/2,this.game.input.activePointer.y=this.game.height/2,this.lastBulletShotAt=0,this.background=this.add.tileSprite(0,200,2344,552,"bg"),this.player=this.add.sprite(200,390,"player"),this.gun=this.add.sprite(0,0,"gun"),this.player.addChild(this.gun),this.player.anchor.set(.5),this.player.animations.add("walk").play(4,!0),this.physics.enable(this.player,Phaser.Physics.ARCADE),this.player.body.gravity.y=300,this.player.body.setSize(20,26,0,0),this.floor=this.add.sprite(0,420,null),this.physics.enable(this.floor,Phaser.Physics.ARCADE),this.floor.body.setSize(860,50,0,0),this.floor.body.immovable=!0,this.floor.body.allowGravity=!1,this.bulletPool=this.game.add.group();for(var t=0;30>t;t++){var i=this.game.add.sprite(0,0,"bullet");this.bulletPool.add(i),i.anchor.setTo(.5,.5),this.game.physics.enable(i,Phaser.Physics.ARCADE),i.kill()}},i.prototype.shootBullet=function(){var t=190;if(!(this.game.time.now-this.lastBulletShotAt<t)){this.lastBulletShotAt=this.game.time.now;var i=this.bulletPool.getFirstDead();if(!i)return!1;i.revive(),i.checkWorldBounds=!0,i.outOfBoundsKill=!0,i.reset(this.player.x,this.player.y),this.lastRotation=this.game.physics.arcade.angleToPointer(this.player),this.gun.anchor.set(0,.5),Math.cos(this.lastRotation)<0?this.gun.rotation=Math.PI-this.lastRotation:this.gun.rotation=this.lastRotation,i.rotation=this.lastRotation;var o=180;return i.body.velocity.x=Math.cos(i.rotation)*o,i.body.velocity.y=Math.sin(i.rotation)*o,!0}},i.prototype.update=function(){var t=this;if(this.game.physics.arcade.collide(this.player,this.floor),this.game.physics.arcade.collide(this.bulletPool,this.floor,function(i,o){var e=t.add.sprite(o.body.x,o.body.y,"smoke");e.alpha=.8,e.anchor.set(.5);var s=e.animations.add("burn");s.onComplete.addOnce(function(){return e.kill()}),s.play(),o.kill()}),this.background.x-=1.5,this.background.x<-586&&(this.background.x=0),this.player.scale.x=1,this.gun.visible=!1,this.game.input.activePointer.isDown){this.gun.visible=!0,this.shootBullet();var i=Math.cos(this.lastRotation),o=Math.sin(this.lastRotation);0>i&&(this.player.scale.x=-1),this.background.x+=i/2,this.player.body.touching.down?o>.6&&(this.player.body.velocity.y=-250):this.player.body.velocity.y>80&&o>.6?this.player.body.velocity.y=80:this.player.body.velocity.y-=2*o}},i}(Phaser.State);i.Main=e},function(t,i){"use strict";var o=this&&this.__extends||function(t,i){function o(){this.constructor=t}for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)},e=function(t){function i(){t.apply(this,arguments)}return o(i,t),i.prototype.preload=function(){this.preloadBar=this.add.sprite(290,290,"preload-bar"),this.load.setPreloadSprite(this.preloadBar)},i.prototype.create=function(){this.game.state.start("main")},i}(Phaser.State);i.Preload=e},function(t,i,o){"use strict";var e=o(6);i.Main=e.Main;var s=o(7);i.Preload=s.Preload;var a=o(5);i.Boot=a.Boot}]);
//# sourceMappingURL=bundle.js.map